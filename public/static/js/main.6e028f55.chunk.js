(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{346:function(e,t,a){e.exports=a(629)},389:function(e,t,a){},391:function(e,t,a){},510:function(e,t,a){},512:function(e,t,a){},514:function(e,t,a){},591:function(e,t,a){},593:function(e,t,a){},595:function(e,t,a){},597:function(e,t,a){},599:function(e,t,a){},601:function(e,t,a){},603:function(e,t,a){},607:function(e,t,a){},609:function(e,t,a){},611:function(e,t,a){},613:function(e,t,a){},615:function(e,t,a){},617:function(e,t,a){},619:function(e,t,a){},622:function(e,t,a){},624:function(e,t,a){},627:function(e,t,a){},629:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(300),l=a.n(o),c=a(10),s=a(12),d=a.n(s),u=a(301),i=a(302),m=a(83),p=a.n(m),b=a(375).parse(window.location.search),E="http://".concat(window.location.hostname,"/pdv/"),g=b.token,f=b.user_id,v=b.user_session_value,h=function(e){var t={locale:"pt-BR",minimumFractionDigits:"undefined"===typeof e.minDecimals?2:e.minDecimals,maximumFractionDigits:"undefined"===typeof e.maxDecimals?2:e.maxDecimals};return e.style&&(t.style=e.style),e.currency&&(t.currency=e.currency),"percent"===e.style&&(e.value=parseFloat(e.value||0)/100),parseFloat(e.value).toLocaleString(e.locale||"pt-BR",t)};function y(){y=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",l=n.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(w){c=function(e,t,a){return e[t]=a}}function s(e,t,a,n){var r=t&&t.prototype instanceof i?t:i,o=Object.create(r.prototype),l=new D(n||[]);return o._invoke=function(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return x()}for(a.method=r,a.arg=o;;){var l=a.delegate;if(l){var c=_(l,a);if(c){if(c===u)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=d(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===u)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}(e,a,l),o}function d(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(w){return{type:"throw",arg:w}}}e.wrap=s;var u={};function i(){}function m(){}function p(){}var b={};c(b,r,function(){return this});var E=Object.getPrototypeOf,g=E&&E(E(O([])));g&&g!==t&&a.call(g,r)&&(b=g);var f=p.prototype=i.prototype=Object.create(b);function v(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function h(e,t){var n;this._invoke=function(r,o){function l(){return new t(function(n,l){!function n(r,o,l,c){var s=d(e[r],e,o);if("throw"!==s.type){var u=s.arg,i=u.value;return i&&"object"==typeof i&&a.call(i,"__await")?t.resolve(i.__await).then(function(e){n("next",e,l,c)},function(e){n("throw",e,l,c)}):t.resolve(i).then(function(e){u.value=e,l(u)},function(e){return n("throw",e,l,c)})}c(s.arg)}(r,o,n,l)})}return n=n?n.then(l,l):l()}}function _(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=d(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function O(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return m.prototype=p,c(f,"constructor",p),c(p,"constructor",m),m.displayName=c(p,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,l,"GeneratorFunction")),e.prototype=Object.create(f),e},e.awrap=function(e){return{__await:e}},v(h.prototype),c(h.prototype,o,function(){return this}),e.AsyncIterator=h,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var l=new h(s(t,a,n,r),o);return e.isGeneratorFunction(a)?l:l.next().then(function(e){return e.done?e.value:l.next()})},v(f),c(f,l,"Generator"),c(f,r,function(){return this}),c(f,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=O,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return l.type="throw",l.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),s=a.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=e,l.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),C(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;C(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:O(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}p.a.defaults.baseURL=E;var _=new function e(){var t=this;Object(i.a)(this,e),this.post=function(){var e=Object(u.a)(y().mark(function e(a){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("api/".concat(a.script,".php?").concat(new URLSearchParams({action:a.action}).toString()),a.data||null,{headers:{"x-token":g,"x-user-id":f,"x-user-session-value":v,"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e}).catch(function(e){return e.status=e.response.status,e.statusText=e.response.statusText,t.error(a.data||null,e.response.data),401===e.status&&window.electronMessage("Unauthorized","appWindow"),403===e.status&&window.electronMessage("afterLogout"),e});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.error=function(e,t){p.a.post("error.php",{params:e,response:t},{headers:{user_id:f,user_session_value:v,"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})}},N=r.a.createContext(),C=(a(389),function(){return r.a.createElement("div",{className:"bar"})}),D=a(637),O=(a(85),a(51)),x=a(157),w=a(41),T=(a(391),D.a.Column),P=D.a.HeaderCell,S=D.a.Cell,j=function(e){var t=e.columnBudgetTitle,a=e.dataRows,o=e.setDataRow,l=r.a.useState(),s=Object(c.a)(l,2),u=s[0],i=s[1],m=r.a.useState(),p=Object(c.a)(m,2),b=p[0],E=p[1],g=[{dataKey:"NrDocumento",HeaderCell:"DOC"},{dataKey:"NmUsuario",HeaderCell:"USU\xc1RIO"},{dataKey:"NmCliente",HeaderCell:"CLIENTE"},{dataKey:"external_code",HeaderCell:t},{dataKey:"NmVendedor",HeaderCell:"VENDEDOR"},{dataKey:"VlDocumento",HeaderCell:"VALOR"}],f=Object(n.useContext)(N),v=f.budget,h=f.config,y=f.setModalConfirm,_=f.setModalMessage;return r.a.createElement(D.a,{fillHeight:!0,data:b&&u?a.sort(function(e,t){var a=e[b],n=t[b];return"VlDocumento"===b&&(a=parseFloat(a.replace(",",".")),n=parseFloat(n.replace(",","."))),["NmCliente","NmVendedor"].indexOf(b)>=0&&("string"===typeof a&&(a=a.charCodeAt()),"string"===typeof n&&(n=n.charCodeAt())),"asc"===u?a-n:n-a}):a,sortColumn:b,sortType:u,onSortColumn:function(e,t){E(e),i(t)},rowClassName:function(e){return function(e){var t=[];return e&&("--"===e.NrDocumento&&t.push("row-opened"),e.budget_id===v.budget_id&&t.push("row-selected"),e.CdStatus&&(e.CdStatus<9&&t.push("row-billing"),"S"===e.StCancelado?t.push("row-canceled"):9===e.CdStatus?t.push("row-billed"):e.CdStatus>=900&&t.push("row-canceling")),e.cStat&&100!==e.cStat&&t.push("row-rejected")),t.join(" ")}(e)},onRowClick:function(e){o(e)}},r.a.createElement(T,{width:80,align:"center",fixed:"left"},r.a.createElement(P,null),r.a.createElement(S,null,r.a.createElement(O.c,null))),(g||[]).map(function(e,t){return r.a.createElement(T,{key:t,flexGrow:1,align:"center",fixed:!0,sortable:!0},r.a.createElement(P,null,e.HeaderCell),r.a.createElement(S,{dataKey:e.dataKey}))}),r.a.createElement(T,{width:80,align:"center",fixed:"right"},r.a.createElement(P,null),r.a.createElement(S,null,function(e){return r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:function(t){t.preventDefault(),t.stopPropagation(),y({id:"documentPrint",message:"\n\t\t\t\tPara reimprimir o documento ser\xe1 necess\xe1rio autoriza\xe7\xe3o especial.\n\t\t\t\tO que deseja fazer?\n\t\t\t",opened:!0,confirmed:!1,buttonDenyText:"Cancelar",buttonConfirmText:"Solicitar Permiss\xe3o",data:e})}},r.a.createElement(w.a,null)),r.a.createElement("button",{onClick:function(t){t.preventDefault(),t.stopPropagation(),y({id:"documentRecover",message:"Deseja realmente recuperar o documento?",opened:!0,confirmed:!1,buttonDenyText:"N\xe3o",buttonConfirmText:"Sim",data:e})}},r.a.createElement(w.c,null)),r.a.createElement("button",{onClick:function(t){t.preventDefault(),t.stopPropagation(),function(e){console.log(e);var t,a=0;a="OE"===e.modelo?parseInt(h.pdv.cancellationTimeoutOE):parseInt(h.pdv.cancellationTimeoutNFCe),d()().diff(d()(e.dhRecbto||e.terminal_document_date),"minutes")>a?_({class:"warning",message:"\n\t\t\t\t\tOps!<br/>\n\t\t\t\t\tN\xe3o ser\xe1 poss\xedvel cancelar o documento.<br/>\n\t\t\t\t\tTempo limite de <b>".concat((t=a,t>60?"".concat(parseInt(t/60)," horas"):"".concat(t," minutos")),"</b> excedido!<br/>\n\t\t\t\t"),opened:!0}):y({id:"documentCancel",message:("Y"===e.budget_credit?"Aten\xe7\xe3o!<br/>Este documento possui carta de cr\xe9dito como pagamento.<br/>A carta de cr\xe9dito ser\xe1 recuparada para que possa ser reutilizada em um novo or\xe7amento.<br/><br/>":"")+"Deseja realmente cancelar o documento?",opened:!0,confirmed:!1,buttonDenyText:"N\xe3o",buttonConfirmText:"Sim",data:e})}(e)}},r.a.createElement(w.b,null)),r.a.createElement("button",{onClick:function(t){var a;t.preventDefault(),t.stopPropagation(),_({class:"S"===(a=e).StCancelado?"info":"danger",title:"S"===a.StCancelado?"Documento cancelado":"Rejei\xe7\xe3o ".concat(a.cStat),message:"S"===a.StCancelado?"\n\t\t\t\tData: ".concat(d()(a.DtCancelamento).format("DD/MM/YYYY HH:mm:ss"),"<br/>\n\t\t\t\tAutoriza\xe7\xe3o: ").concat(a.NmUsuarioCancelamento,"\n\t\t\t"):a.xMotivo,opened:!0})}},r.a.createElement(x.d,null)))})))},I=(a(510),function(e){var t=e.initBudget,a=Object(n.useState)(1),o=Object(c.a)(a,2),l=o[0],s=o[1],d=Object(n.useState)({zIndex:2}),u=Object(c.a)(d,2),i=u[0],m=u[1],p=Object(n.useState)({zIndex:0}),b=Object(c.a)(p,2),E=b[0],g=b[1],f=Object(n.useState)({display:"block",zIndex:1,opacity:1}),v=Object(c.a)(f,2),y=v[0],_=v[1],C=Object(n.useState)({display:"none",zIndex:0,opacity:0}),D=Object(c.a)(C,2),O=D[0],x=D[1],w=Object(n.useState)([]),T=Object(c.a)(w,2),P=T[0],S=T[1],I=Object(n.useState)([]),V=Object(c.a)(I,2),A=V[0],L=V[1],R=Object(n.useState)({}),F=Object(c.a)(R,2),M=F[0],k=F[1],z=Object(n.useContext)(N),Y=z.budgets,B=z.getBudget;Object(n.useEffect)(function(){t(),m({zIndex:1===l?2:0}),g({zIndex:2===l?2:0}),_(1===l?{display:"block",zIndex:1,opacity:1}:{display:"none",zIndex:0,opacity:0}),x(2===l?{display:"block",zIndex:1,opacity:1}:{display:"none",zIndex:0,opacity:0})},[l]);return Object(n.useEffect)(function(){!function(){var e=[],t=[];Y.forEach(function(a){a.VlDocumento=h({value:a.budget_value_total}),"D"===a.external_type?e.push(a):t.push(a)}),S(e),L(t)}()},[Y]),Object(n.useEffect)(function(){M.budget_id&&(B(M.budget_id),k({}))},[M]),r.a.createElement("div",{className:"tabs"},r.a.createElement("button",{className:"btn",style:i,onClick:function(){return s(1)}},"CUPOM"),r.a.createElement("button",{className:"btn",style:E,onClick:function(){return s(2)}},"ORDEM DE ENTREGA"),r.a.createElement("div",{className:"tab box-shadow",style:y},r.a.createElement(j,{columnBudgetTitle:"DAV",dataRows:P,setDataRow:k})),r.a.createElement("div",{className:"tab box-shadow",style:O},r.a.createElement(j,{columnBudgetTitle:"PEDIDO",dataRows:A,setDataRow:k})))}),V=(a(512),function(){var e=Object(n.useContext)(N),t=e.user,a=e.company;return r.a.createElement("div",{id:"footer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"legend"},r.a.createElement("div",{className:"item opened"},r.a.createElement("span",null),"Aberto"),r.a.createElement("div",{className:"item billed"},r.a.createElement("span",null),"Faturado"),r.a.createElement("div",{className:"item rejected"},r.a.createElement("span",null),"Rejeitado"),r.a.createElement("div",{className:"item canceled"},r.a.createElement("span",null),"Cancelado")),r.a.createElement("div",{className:"company"},r.a.createElement("div",{className:"company-image",style:{backgroundImage:"url(".concat(a.image,")")}}),r.a.createElement("div",{className:"company-name"},a.company_code," - ",a.company_short_name.toUpperCase())),r.a.createElement("div",{className:"user"},r.a.createElement("div",{className:"user-image",style:{backgroundImage:"url(".concat(t.image,")")}}),r.a.createElement("div",{className:"user-name"},t.user_name.toUpperCase()))))}),A=a(642),L=a(231),R=a(326),F=a(148),M=a(639),k=a(641),z=(a(514),a(516),function(){var e=Object(n.useContext)(N),t=e.time,a=e.user,o=e.company,l=e.setCompany,c=e.filters,s=e.setFilters,u=e.setModalConfirm,i=e.setModalAuthorization,m=a.companies.map(function(e){return{label:"".concat(e.company_code," - ").concat(e.company_short_name.toUpperCase()),value:e.company_id}}),p=function(e){window.electronMessage(e,"appWindow")},b=function(e){s({company_id:c.company_id,reference:c.reference,show_opened:e?"Y":"N",show_billed:c.show_billed,show_others:c.show_others})},E=function(e){s({company_id:c.company_id,reference:c.reference,show_opened:c.show_opened,show_billed:e?"Y":"N",show_others:c.show_others})},g=function(e){s({company_id:c.company_id,reference:c.reference,show_opened:c.show_opened,show_billed:c.show_billed,show_others:e?"Y":"N"})};return r.a.createElement("div",{className:"header",id:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"logo"}),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:function(){u({id:"close",message:"Deseja realmente encerrar o caixa?",opened:!0,confirmed:!1,buttonDenyText:"N\xe3o",buttonConfirmText:"Sim"})}},r.a.createElement(L.b,null)),r.a.createElement("button",{onClick:function(){return p("about")}},r.a.createElement(x.c,null)),r.a.createElement("button",{onClick:function(){return p("selectPrinter")}},r.a.createElement(x.e,null)),r.a.createElement("button",{onClick:function(){i({action:"openDevTools",title:"Autoriza\xe7\xe3o",message:"Para acessar a ferramenta ser\xe1 necess\xe1rio a autoriza\xe7\xe3o",opened:!0,authorized:!1,buttonDenyText:"Cancelar",buttonConfirmText:"Autorizar",data:{}})}},r.a.createElement(x.a,null))),r.a.createElement("div",{className:"filter"},r.a.createElement("div",{className:"grid reference"},r.a.createElement("label",null,"DATA"),r.a.createElement(F.a,{direction:"column",alignItems:"flex-start",spacing:6},r.a.createElement(M.a,{oneTap:!0,cleanable:!1,format:"dd/MM/yyyy",defaultValue:new Date,onChange:function(e){return s({company_id:c.company_id,reference:d()(e).format("YYYY-MM-DD"),show_opened:c.show_opened,show_billed:c.show_billed,show_others:c.show_others})}}))),r.a.createElement("div",{className:"grid companies"},r.a.createElement("label",null,"EMPRESA"),r.a.createElement(k.a,{data:m,cleanable:!1,value:o.company_id,onChange:function(e){var t=a.companies.filter(function(t){return t.company_id===e})[0];l(t)},placeholder:"--"})),r.a.createElement("div",{className:"grid toggle"},r.a.createElement(A.a,{checked:"Y"===c.show_opened,onChange:function(e){b(e)}}),r.a.createElement("b",{onClick:function(){return b("N"===c.show_opened)}},"Abertos")),r.a.createElement("div",{className:"grid toggle"},r.a.createElement(A.a,{checked:"Y"===c.show_billed,onChange:function(e){E(e)}}),r.a.createElement("b",{onClick:function(){return E("N"===c.show_billed)}},"Faturados")),r.a.createElement("div",{className:"grid toggle"},r.a.createElement(A.a,{checked:"Y"===c.show_others,onChange:function(e){g(e)}}),r.a.createElement("b",{onClick:function(){return g("N"===c.show_others)}},"Todos")),r.a.createElement("button",{onClick:function(e){s({company_id:c.company_id,reference:c.reference,show_opened:c.show_opened,show_billed:c.show_billed,show_others:c.show_others})}},r.a.createElement(R.a,null))),r.a.createElement("div",{className:"date"},d()().locale("pt-br").format("dddd")," - ",d()().format("DD/MM/YYYY")," - ",t)))}),Y=(a(591),function(e){var t=e.loadingStyle;return r.a.createElement("div",{className:"loading",style:t},r.a.createElement("div",{className:"lds-ellipsis"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),B=function(e){var t=e.data;return r.a.createElement("div",{className:"note"},r.a.createElement("table",{className:"border"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"border-right"},r.a.createElement("span",null,"SUBTOTAL"),h({value:t.VlDocumento,currency:"BRL",style:"currency"})),r.a.createElement("td",{className:"border-right"},r.a.createElement("span",null,"ACR\xc9SCIMO"),h({value:0,style:"percent"})),r.a.createElement("td",{className:"border-right"},r.a.createElement("span",null,"ACR\xc9SCIMO"),h({value:0,currency:"BRL",style:"currency"})),r.a.createElement("td",{className:"border-right"},r.a.createElement("span",null,"DESCONTO"),h({value:t.AlDesconto,style:"percent"})),r.a.createElement("td",{className:"border-right"},r.a.createElement("span",null,"DESCONTO"),h({value:t.VlDesconto,currency:"BRL",style:"currency"})),r.a.createElement("td",null,r.a.createElement("span",null,"VALOR TOTAL"),h({value:t.VlTotal,currency:"BRL",style:"currency"}))))),r.a.createElement("div",{className:"text border"},"Obs.: ",t.DsObservacaoDocumento||""))},H=function(e){var t=e.items;return r.a.createElement("table",{className:"items"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Item"),r.a.createElement("th",null,"C\xf3digo"),r.a.createElement("th",null,"Produto"),r.a.createElement("th",null,"Unidade"),r.a.createElement("th",null,"Qtd"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",{colSpan:"2"},"Desconto"),r.a.createElement("th",null,"Total"))),r.a.createElement("tbody",null,t.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.key),r.a.createElement("td",null,e.product.CdChamada),r.a.createElement("td",null,e.product.NmProduto),r.a.createElement("td",null,e.product.CdSigla),r.a.createElement("td",null,h({value:e.budget_item_quantity,minDecimals:3,maxDecimals:3})),r.a.createElement("td",null,h({value:e.budget_item_value,currency:"BRL",style:"currency"})),r.a.createElement("td",null,h({value:e.budget_item_aliquot_discount,style:"percent"})),r.a.createElement("td",null,h({value:e.budget_item_value_discount,currency:"BRL",style:"currency"})),r.a.createElement("td",null,h({value:e.budget_item_value_total,currency:"BRL",style:"currency"})))})))},G=function(e){var t=e.data;return r.a.createElement("div",{className:"footer"},r.a.createElement("span",null,"Data de impress\xe3o: ",t.DtImpressao),r.a.createElement("span",null,"P\xe1gina ",t.NrPagina,"/",t.QtPaginas))},U=function(e){var t=e.data,a=e.company;return r.a.createElement("table",{className:"header"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("b",null,a.company_name)),r.a.createElement("td",null,r.a.createElement("b",null,a.external.NrCGC.substring(0,2),".",a.external.NrCGC.substring(2,5),".",a.external.NrCGC.substring(5,8),"/",a.external.NrCGC.substring(8,12),"-",a.external.NrCGC.substring(12,14)))),r.a.createElement("tr",null,r.a.createElement("td",{className:"logo"},r.a.createElement("img",{alt:a.company_short_name,src:a.image})),r.a.createElement("td",{className:"company"},"Loja ",a.company_code," - ",a.company_short_name,r.a.createElement("br",null),a.external.DsEndereco,",  ",a.external.NrLogradouro,r.a.createElement("br",null),a.external.NmBairro,",  ",a.external.NmCidade," - ",a.external.CdUF,r.a.createElement("br",null),"CEP: ",a.external.NrCEP),r.a.createElement("td",{className:"document"},r.a.createElement("div",{className:"box border"},"Documento",r.a.createElement("span",null,t.NrDocumento)),"Emiss\xe3o: ",d()(t.DtEmissao).format("DD/MM/YYYY")))))},K=function(e){var t=e.person;return r.a.createElement("table",{className:"person border"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"border-bottom border-right"},r.a.createElement("span",null,"CLIENTE"),t.NmPessoa),r.a.createElement("td",{className:"border-bottom border-right"},r.a.createElement("span",null,"C\xd3DIGO"),t.CdChamada),r.a.createElement("td",{className:"border-bottom"},r.a.createElement("span",null,"F"===t.TpPessoa?"CPF":"CNPJ"),t.CdCPF_CGC)),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("span",null,"ENDERE\xc7O DE ENTREGA"),t.address.NmLogradouro,",",t.address.NrLogradouro," -",t.address.NmBairro," -",t.address.NmCidade," -",t.address.IdUF),r.a.createElement("td",{className:"border-left"},r.a.createElement("span",null,"CEP"),t.address.CdCEP))))},q=function(e){var t=e.data;return r.a.createElement("div",{className:"success"},r.a.createElement("p",null,"Documento Faturado com sucesso!",r.a.createElement("br",null),r.a.createElement("b",null,t.NrDocumento)))},Q=function(e){var t=e.term,a=e.payments;return r.a.createElement("div",{className:"data-payments"},"PRAZO: ",t?t.DsPrazo:"N\xc3O INFORMADO",r.a.createElement("table",{className:"payments"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Parcela"),r.a.createElement("th",null,"Modalidade"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Vencimento"))),r.a.createElement("tbody",null,a.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.external.DsFormaPagamento),r.a.createElement("td",null,h({value:e.budget_payment_value,currency:"BRL",style:"currency"})),r.a.createElement("td",null,d()(e.budget_payment_deadline).format("DD/MM/YYYY")))}))))},J=function(e){var t=e.data;return r.a.createElement("table",{className:"operation border"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2",className:"border-bottom"},r.a.createElement("span",null,"Documento"),"(",t.TpDocumento,") ",t.DsDocumento)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",null,"OPERA\xc7\xc3O"),t.TpOperacao),r.a.createElement("td",{className:"border-left"},r.a.createElement("span",null,"DESCRI\xc7\xc3O"),t.NmOperacao))))},$=function(e){var t=e.data;return r.a.createElement("table",{className:"signature border"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2",className:"border-bottom"},"Nome Leg\xedvel")),r.a.createElement("tr",null,r.a.createElement("td",null,"Data de Emiss\xe3o: ",d()(t.DtEmissao).format("DD/MM/YYYY")),r.a.createElement("td",{className:"border-left"},"Data do Recebimento: ____/____/________"))))),r.a.createElement("td",{width:"130",className:"border-left text-right"},"Documento",r.a.createElement("span",null,t.NrDocumento)))))},W=function(e){e.data;return r.a.createElement("div",{className:"walter-mark"},r.a.createElement("span",null,"2\xaa Via 2\xaa Via 2\xaa Via 2\xaa Via"),r.a.createElement("span",null,"2\xaa Via 2\xaa Via 2\xaa Via 2\xaa Via"),r.a.createElement("span",null,"2\xaa Via 2\xaa Via 2\xaa Via 2\xaa Via"),r.a.createElement("span",null,"2\xaa Via 2\xaa Via 2\xaa Via 2\xaa Via"),r.a.createElement("span",null,"2\xaa Via 2\xaa Via 2\xaa Via 2\xaa Via"),r.a.createElement("span",null,"2\xaa Via 2\xaa Via 2\xaa Via 2\xaa Via"),r.a.createElement("span",null,"2\xaa Via 2\xaa Via 2\xaa Via 2\xaa Via"),r.a.createElement("span",null,"2\xaa Via 2\xaa Via 2\xaa Via 2\xaa Via"),r.a.createElement("span",null,"2\xaa Via 2\xaa Via 2\xaa Via 2\xaa Via"),r.a.createElement("span",null,"2\xaa Via 2\xaa Via 2\xaa Via 2\xaa Via"))},Z=(a(593),function(e){var t=e.getEmptyBudget,a=Object(n.useRef)(null),o=d()().format("DD/MM/YYYY HH:mm:ss"),l=Object(n.useContext)(N),c=l.company,s=l.printOE,u=l.setPrintOE;return Object(n.useLayoutEffect)(function(){s.opened&&s.budget&&s.budget.budget_id&&a.current.focus()},[s]),r.a.createElement("div",{className:"shadow shadow-print overflow-y ".concat(s.opened?"opened":"")},!s.reprint&&r.a.createElement(q,{data:{NrDocumento:s.budget.document.NrDocumento}}),!!s.budget.budget_id&&r.a.createElement("div",{className:"print-oe ".concat(s.reprint?"reprint":"")},s.budget.pages.map(function(e,t){return r.a.createElement("div",{key:t,className:"data-print"},0===t&&r.a.createElement(r.a.Fragment,null,r.a.createElement($,{data:{DtEmissao:s.budget.document.terminal_document_date,NrDocumento:s.budget.document.NrDocumento}}),r.a.createElement("hr",null)),r.a.createElement(U,{data:{DtEmissao:s.budget.document.terminal_document_date,NrDocumento:s.budget.document.NrDocumento},company:c}),r.a.createElement(J,{data:{TpDocumento:"OE",DsDocumento:"ORDEM DE ENTREGA",TpOperacao:"VENDA",NmOperacao:s.budget.operation.NmOperacao}}),r.a.createElement(K,{person:s.budget.person}),r.a.createElement(H,{items:e.items}),t+1===s.budget.pages.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{term:s.budget.term,payments:s.budget.payments}),r.a.createElement(B,{data:{VlDocumento:s.budget.budget_value,AlDesconto:s.budget.budget_aliquot_discount,VlDesconto:s.budget.budget_value_discount,VlTotal:s.budget.budget_value_total,DsObservacaoDocumento:s.budget.external.DsObservacaoDocumento}})),r.a.createElement(G,{data:{DtImpressao:o,NrPagina:t+1,QtPaginas:s.budget.pages.length}}),s.reprint&&r.a.createElement(W,null))})),r.a.createElement("button",{ref:a,className:"button-print",onClick:function(){window.print()}},r.a.createElement(w.a,null)),r.a.createElement("button",{className:"button-print-close",onClick:function(){u({opened:!1,budget:t(),getBudgets:!0})}},r.a.createElement(w.d,null)))}),X=(a(595),function(e){var t=e.getEmptyBudget,a=Object(n.useRef)(null),o=Object(n.useContext)(N),l=o.company,c=o.printNFCe,s=o.setPrintNFCe;return Object(n.useLayoutEffect)(function(){c.opened&&c.budget&&c.budget.budget_id&&a.current.focus()},[c]),r.a.createElement("div",{className:"shadow shadow-print overflow-y ".concat(c.opened?"opened":"")},!c.reprint&&r.a.createElement(q,{data:{NrDocumento:c.budget.document.NrDocumento}}),r.a.createElement("div",{className:"print-nfce"},r.a.createElement("div",{className:"company-name"},l.company_name),r.a.createElement("div",{className:"company-document"},"CNPJ: ",l.external.NrCGC),r.a.createElement("div",{className:"address"},l.external.DsEndereco,", ",l.external.NrLogradouro,r.a.createElement("br",null),l.external.NmBairro,", ",l.external.NmCidade," - ",l.external.CdUF,r.a.createElement("br",null),"CEP: ",l.external.NrCEP),r.a.createElement("div",{className:"divider"}),r.a.createElement("div",{className:"header-info"},"Documento auxiliar da nota fiscal de consumidor eletr\xf4nica"),r.a.createElement("div",{className:"divider"}),!!c.budget.budget_id&&r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"items"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",{className:"text-center"},"C\xd3D"),r.a.createElement("th",{className:"text-center",colSpan:"3"},"DESCRI\xc7\xc3O")),r.a.createElement("tr",null,r.a.createElement("th",{className:"text-center"},"ITEM"),r.a.createElement("th",{className:"text-center"},"QTD."),r.a.createElement("th",{className:"text-center"},"VALOR"),r.a.createElement("th",{className:"text-center"},"DESCONTO"),r.a.createElement("th",{className:"text-right"},"TOTAL"))),r.a.createElement("tbody",null,c.budget.items.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("tr",null,r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.product.CdChamada),r.a.createElement("td",{colSpan:"3"},e.product.NmProduto.substring(0,38))),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{className:"ng-binding"},h({value:e.budget_item_quantity,minDecimals:3,maxDecimals:3}),e.product.CdSigla),r.a.createElement("td",null,h({value:e.budget_item_value,currency:"BRL",style:"currency"})),r.a.createElement("td",null,h({value:e.budget_item_value_discount,currency:"BRL",style:"currency"})," [",h({value:e.budget_item_aliquot_discount,style:"percent"}),"]"),r.a.createElement("td",{className:"text-right"},h({value:e.budget_item_value_total,currency:"BRL",style:"currency"}))))}))),r.a.createElement("div",{className:"divider"}),r.a.createElement("table",{className:"payments"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-left"},"SUBTOTAL"),r.a.createElement("th",{className:"text-right"},h({value:c.budget.budget_value,currency:"BRL",style:"currency"}))),r.a.createElement("tr",null,r.a.createElement("th",{className:"text-left"},"DESCONTO"),r.a.createElement("th",{className:"text-right"},h({value:c.budget.budget_value_discount,currency:"BRL",style:"currency"}))),r.a.createElement("tr",null,r.a.createElement("th",{className:"text-left"},"TOTAL"),r.a.createElement("th",{className:"text-right"},h({value:c.budget.budget_value_total,currency:"BRL",style:"currency"}))),r.a.createElement("tr",null,r.a.createElement("th",{className:"text-left"},"PAGO"),r.a.createElement("th",{className:"text-right"},h({value:c.budget.budget_value_total+c.budget.document.vlTroco,currency:"BRL",style:"currency"}))),r.a.createElement("tr",null,r.a.createElement("th",{className:"text-left"},"TROCO"),r.a.createElement("th",{className:"text-right"},h({value:c.budget.document.vlTroco,currency:"BRL",style:"currency"})))),r.a.createElement("tbody",null,c.budget.payments.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{className:"text-left"},e.external.DsFormaPagamento," [",e.budget_payment_installment,"x]"),r.a.createElement("td",{className:"text-right"},h({value:e.budget_payment_value,currency:"BRL",style:"currency"})))}))),r.a.createElement("div",{className:"divider"}),r.a.createElement("div",{className:"nfce-info"},r.a.createElement("b",null,"NFC-e: ",c.budget.document.NrDocumento," S\xe9rie: ",c.budget.document.serie," Emiss\xe3o ",d()(c.budget.document.dhRecbto).format("DD/MM/YYYY")),r.a.createElement("br",null),"Consulte pela chave de acesso em:",r.a.createElement("br",null),"http://www.fazenda.rj.gov.br/nfce/consulta",r.a.createElement("br",null),c.budget.document.chNFe.substring(0,4),"\xa0",c.budget.document.chNFe.substring(4,8),"\xa0",c.budget.document.chNFe.substring(8,12),"\xa0",c.budget.document.chNFe.substring(12,16),"\xa0",c.budget.document.chNFe.substring(16,20),"\xa0",c.budget.document.chNFe.substring(20,24),"\xa0",c.budget.document.chNFe.substring(24,28),"\xa0",c.budget.document.chNFe.substring(28,32),"\xa0",c.budget.document.chNFe.substring(32,36),"\xa0",c.budget.document.chNFe.substring(36,40),"\xa0",c.budget.document.chNFe.substring(40,44),r.a.createElement("br",null),"Protocolo de autoriza\xe7\xe3o: ",c.budget.document.nProt,r.a.createElement("br",null),d()(c.budget.document.dhRecbto.replace("T"," ").substring(0,19)).format("DD/MM/YYYY HH:mm:ss")),r.a.createElement("div",{className:"divider"}),r.a.createElement("div",{className:"person"},r.a.createElement("b",null,"Cliente"),r.a.createElement("br",null),c.budget.person.NmPessoa,!c.budget.person.StConsumidor&&!!c.budget.person.address&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),c.budget.person.address.NmLogradouro,", ",c.budget.person.address.NrLogradouro,r.a.createElement("br",null),c.budget.person.address.NmBairro," - ",c.budget.person.address.NmCidade," - ",c.budget.person.address.IdUF,r.a.createElement("br",null),"CEP: ",c.budget.person.address.CdCEP)),r.a.createElement("div",{className:"divider"}),!!c.budget.document.qrCodePath&&r.a.createElement("div",{className:"qr-code"},r.a.createElement("img",{alt:"Qr Code",src:"".concat(E,"qrcode/").concat(c.budget.company_id,"/").concat(c.budget.document.qrCodePath)})),r.a.createElement("div",{className:"divider"}),r.a.createElement("div",{className:"ibpt"},"Trib. Totais Incid. - Lei 12.741/2012 Fonte: IBPT",r.a.createElement("br",null),"Tot. aprox. trib. federais ",h({value:c.budget.document.vFedTrib,currency:"BRL",style:"currency"}),r.a.createElement("br",null),"Tot. aprox. trib. estaduais ",h({value:c.budget.document.vEstTrib,currency:"BRL",style:"currency"}),r.a.createElement("br",null),"Tot. aprox. trib. municipais ",h({value:c.budget.document.vMunTrib,currency:"BRL",style:"currency"}),r.a.createElement("br",null)),r.a.createElement("div",{className:"cpl"},"INFORMA\xc7\xd5ES ADICIONAIS DO INTERESSE DO CONTRIBUINTE",r.a.createElement("br",null),"PROCON: Av. Rio Branco,25 Centro RJ. Tel: 151 ALERJ - Rua da Alfandega, 8 Tel. 0800 2827060"))),r.a.createElement("button",{ref:a,className:"button-print",onClick:function(){window.electronMessage("print",{silent:!0,pageSize:{width:8e4,height:297e3}})||window.print()}},r.a.createElement(w.a,null)),r.a.createElement("button",{className:"button-print-close",onClick:function(){s({opened:!1,budget:t(),getBudgets:!0})}},r.a.createElement(w.d,null)))}),ee=a(327),te=(a(597),D.a.Column),ae=D.a.HeaderCell,ne=D.a.Cell,re=function(e){var t=e.items,a=Object(n.useState)(),o=Object(c.a)(a,2),l=o[0],s=o[1],d=Object(n.useState)(),u=Object(c.a)(d,2),i=u[0],m=u[1];return r.a.createElement(D.a,{height:220,data:i&&l?t.sort(function(e,t){var a=e[i],n=t[i];return["CdChamada","NmProduto"].indexOf(i)>=0?("string"===typeof a&&(a=a.charCodeAt()),"string"===typeof n&&(n=n.charCodeAt())):(a=parseFloat(a.replace(",",".")),n=parseFloat(n.replace(",","."))),"asc"===l?a-n:n-a}):t,sortColumn:i,sortType:l,onSortColumn:function(e,t){m(e),s(t)}},([{dataKey:"key",HeaderCell:""},{dataKey:"CdChamada",HeaderCell:"C\xd3DIGO"},{dataKey:"NmProduto",HeaderCell:"PRODUTO"},{dataKey:"Qtd",HeaderCell:"QTD"},{dataKey:"VlUnitatio",HeaderCell:"VL UNIT"},{dataKey:"AlDesconto",HeaderCell:"AL DESC"},{dataKey:"VlDesconto",HeaderCell:"VL DESC"},{dataKey:"VlTotal",HeaderCell:"VL TOTAL"}]||[]).map(function(e,t){return r.a.createElement(te,{width:0===t?42:2===t?324:96,key:t,align:2===t?"left":"center",fixed:!0,sortable:t>0},r.a.createElement(ae,null,e.HeaderCell),r.a.createElement(ne,{dataKey:e.dataKey}))}))},oe=(a(599),D.a.Column),le=D.a.HeaderCell,ce=D.a.Cell,se=function(e){var t=e.payments,a=Object(n.useState)(),o=Object(c.a)(a,2),l=o[0],s=o[1],d=Object(n.useState)(),u=Object(c.a)(d,2),i=u[0],m=u[1];return r.a.createElement(D.a,{height:164,data:i&&l?t.sort(function(e,t){var a=e[i],n=t[i];return"VlParcela"==i?(a=parseFloat(a.replace(",",".")),n=parseFloat(n.replace(",","."))):("string"===typeof a&&(a=a.charCodeAt()),"string"===typeof n&&(n=n.charCodeAt())),"asc"===l?a-n:n-a}):t,sortColumn:i,sortType:l,onSortColumn:function(e,t){m(e),s(t)}},([{dataKey:"NrParcelas",HeaderCell:""},{dataKey:"DsFormaPagamento",HeaderCell:"MODALIDADE"},{dataKey:"DtVencimento",HeaderCell:"VENCIMENTO"},{dataKey:"NrDias",HeaderCell:"DIAS"},{dataKey:"VlParcela",HeaderCell:"VALOR"}]||[]).map(function(e,t){return r.a.createElement(oe,{key:t,sortable:t>0,flexGrow:1,align:"center",fixed:!0},r.a.createElement(le,null,e.HeaderCell),r.a.createElement(ce,{dataKey:e.dataKey}))}))},de=(a(601),function(){var e=Object(n.useContext)(N),t=e.budget,a=e.getBudget,o=e.modalBudget,l=e.setModalConfirm,c=e.setModalMessage,s=function(){!t.document||t.document.CdStatus<9?l({id:"budgetCancel",message:"Deseja realmente cancelar o faturamento?",opened:!0,confirmed:!1,buttonDenyText:"N\xe3o",buttonConfirmText:"Sim"}):l({id:"budgetCancel",confirmed:!0})};return r.a.createElement("div",{className:"shadow shadow-modal ".concat(o.opened?"opened":"")},!!t.budget_id&&r.a.createElement("div",{className:"modal modal-budget modal-budget-".concat(t.document?t.document&&"S"===t.document.StCancelado?"canceled":t.document&&t.document.cStat&&100!==t.document.cStat?"rejected":t.document&&t.document.CdStatus&&9===t.document.CdStatus?"billed":void 0:"opened"," box-shadow")},r.a.createElement("div",{className:"header"},r.a.createElement(ee.a,null),r.a.createElement("div",{className:"document-code"},"P"===t.external_type?"Orde de Entrega":"Cupom Fiscal"," ",t.document?"(".concat(t.document.NrDocumento,")"):""),r.a.createElement("div",{className:"document-state document-state-opened"},"Aberto"),r.a.createElement("div",{className:"document-state document-state-billed"},"Faturado"),r.a.createElement("div",{className:"document-state document-state-canceled"},"Cancelado"),r.a.createElement("div",{className:"document-state document-state-rejected"},"Rejeitado")),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"top"},r.a.createElement("div",{className:"person"},r.a.createElement("label",null,"Cliente"),r.a.createElement("div",{className:"person-image box-shadow",style:{backgroundImage:"url(".concat(t.person.image,")")}}),r.a.createElement("div",{className:"person-code"},t.person.CdChamada),r.a.createElement("div",{className:"person-name"},t.person.NmPessoa,t.person_nickname?" (".concat(t.person_nickname,")"):"")),r.a.createElement("div",{className:"seller"},r.a.createElement("label",null,"Representante"),r.a.createElement("div",{className:"seller-image box-shadow",style:{backgroundImage:"url(".concat(t.seller.image,")")}}),r.a.createElement("div",{className:"seller-code"},t.seller.CdChamada),r.a.createElement("div",{className:"seller-name"},t.seller.NmPessoa))),r.a.createElement("div",{className:"items"},r.a.createElement(re,{items:function(){var e=[];return t.items.forEach(function(t,a){e.push({key:a+1,CdChamada:t.product.CdChamada,NmProduto:t.product.NmProduto,Qtd:h({value:t.budget_item_quantity,minDecimals:4,maxDecimals:4}),VlUnitatio:h({value:t.budget_item_value_unitary}),AlDesconto:h({value:t.budget_item_aliquot_discount}),VlDesconto:h({value:t.budget_item_value_discount}),VlTotal:h({value:t.budget_item_value_total})})}),e}()})),r.a.createElement("div",{className:"resume"},r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"label"},"Total de Itens"),r.a.createElement("div",{className:"value"},t.items.length," Item(ns)")),r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"label"},"Valor Total"),r.a.createElement("div",{className:"value"},"R$ ",h({value:t.budget_value}))),r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"label"},"Al. Desconto"),r.a.createElement("div",{className:"value"},h({value:t.budget_aliquot_discount}),"%")),r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"label"},"Vl. Desconto"),r.a.createElement("div",{className:"value"},"R$ ",h({value:t.budget_value_discount}))),r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"label"},"Vl Total Liquido"),r.a.createElement("div",{className:"value"},"R$ ",h({value:t.budget_value_total})))),r.a.createElement("div",{className:"bottom"},r.a.createElement("div",{className:"payments"},r.a.createElement(se,{payments:function(){var e=[];return t.payments.forEach(function(t){e.push({NrDias:t.external.NrDias,NrParcelas:"".concat(t.budget_payment_installment,"x"),DtVencimento:d()(t.budget_payment_deadline).format("DD/MM/YYYY"),DsFormaPagamento:t.external.DsFormaPagamento,VlParcela:h({value:t.budget_payment_value})})}),e}()})),r.a.createElement("div",{className:"delivery"},r.a.createElement("label",null,"Entrega"),"P"===t.external_type&&"Y"===t.budget_delivery&&r.a.createElement(r.a.Fragment,null,t.person.address.TpLogradouro,"\xa0",t.person.address.NmLogradouro,",\xa0",t.person.address.NrLogradouro,r.a.createElement("br",null),t.person.address.NmBairro," - ",t.person.address.NmCidade," - ",t.person.address.IdUF,r.a.createElement("br",null),"CEP: ",t.person.address.CdCEP),"D"===t.external_type||"N"===t.budget_delivery&&r.a.createElement("i",null,"Sem op\xe7\xe3o de entrega"),r.a.createElement("button",{onClick:function(){c({class:"info",message:t.external.DsObservacaoDocumento.replace(" | ","<br/>"),opened:!0})},disabled:"D"===t.external_type||"N"===t.budget_delivery},"Observa\xe7\xf5es de Entrega")))),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{disabled:!t.budget_id,onClick:function(){return s()}},"Fechar"),r.a.createElement("button",{disabled:!t.budget_id||!!t.document&&t.document.CdStatus>=9,onClick:function(){l({id:"budgetSubmit",message:"Deseja realmente faturar o documento?",opened:!0,confirmed:!1,buttonDenyText:"N\xe3o",buttonConfirmText:"Sim"})}},"Faturar"),r.a.createElement("button",{disabled:!t.budget_id||!!t.document&&t.document.CdStatus>=9,onClick:function(){a(t.budget_id)}},"Atualizar"),r.a.createElement("button",{disabled:!t.budget_id||!t.document||9!=t.document.CdStatus,onClick:function(){l({id:"documentPrint",message:"\n\t\t\t\tPara reimprimir o documento ser\xe1 necess\xe1rio autoriza\xe7\xe3o especial.\n\t\t\t\tO que deseja fazer?\n\t\t\t",opened:!0,confirmed:!1,buttonDenyText:"Cancelar",buttonConfirmText:"Solicitar Permiss\xe3o",data:{modelo:t.document.modelo}})}},"Imprimir"))))}),ue=a(638),ie=a(643),me=a(138),pe=(a(603),function(){var e=Object(n.useContext)(N),t=e.modalChange,a=e.setModalChange,o=Object(n.useState)(0),l=Object(c.a)(o,2),s=l[0],d=l[1],u=Object(n.useState)(0),i=Object(c.a)(u,2),m=i[0],p=i[1];Object(n.useEffect)(function(){t.opened&&(d(0),setTimeout(function(){document.getElementById("paid-value").focus(),document.getElementById("paid-value").select()},300))},[t]),Object(n.useEffect)(function(){var e=0,a=s.toString().replace(",",".");isNaN(Number(a))?d(0):(e=parseFloat(a)-t.chargedValue,p(e>0?e:0))},[s]);return r.a.createElement("div",{className:"shadow shadow-modal ".concat(t.opened?"opened":""),style:{zIndex:11}},r.a.createElement("div",{className:"modal modal-change box-shadow"},r.a.createElement("div",{className:"header"},r.a.createElement(me.a,null)),r.a.createElement("div",{className:"body"},r.a.createElement(ue.a,null,r.a.createElement(ue.a.Group,{controlId:"charged-value"},r.a.createElement(ue.a.ControlLabel,null,"Valor Devido"),r.a.createElement(ue.a.Control,{disabled:!0,name:"charged-value",value:h({value:t.chargedValue}),style:{width:120}})),r.a.createElement(ue.a.Group,{controlId:"paid-value"},r.a.createElement(ue.a.ControlLabel,null,"Valor Recebido"),r.a.createElement(ie.a,{onKeyUp:function(e){return function(e){13===e.keyCode&&a({opened:0===s,paidValue:parseFloat(s),changeValue:m,chargedValue:t.chargedValue}),27===e.keyCode&&a({opened:!1,paidValue:0,changeValue:0,chargedValue:0})}(e)},value:s,onChange:function(e){return function(e){d(e)}(e)},step:.01})),r.a.createElement(ue.a.Group,{controlId:"change-value"},r.a.createElement(ue.a.ControlLabel,null,"Valor do Troco"),r.a.createElement(ue.a.Control,{disabled:!0,name:"change-value",value:h({value:m}),style:{width:120}}))))))}),be=(a(607),function(){var e=Object(n.useRef)(null),t=Object(n.useContext)(N),a=t.modalConfirm,o=t.setModalConfirm,l=function(e,t){o({id:a.id,message:a.message,opened:!1,canceled:e,confirmed:t,buttonDenyText:a.buttonDenyText,buttonConfirmText:a.buttonConfirmText,data:a.data||null})};return Object(n.useEffect)(function(){a.opened&&setTimeout(function(){e.current.focus()},300)},[a]),r.a.createElement("div",{className:"shadow shadow-modal ".concat(a.opened?"opened":""),style:{zIndex:11}},r.a.createElement("div",{className:"modal modal-confirm box-shadow"},r.a.createElement("div",{className:"header"},r.a.createElement(O.d,null)),r.a.createElement("div",{className:"body"},r.a.createElement("p",{dangerouslySetInnerHTML:{__html:a.message}})),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{onClick:function(){return l(!0,!1)}},a.buttonDenyText),r.a.createElement("button",{ref:e,onClick:function(){return l(!1,!0)}},a.buttonConfirmText))))}),Ee=a(279),ge=(a(609),function(){var e=Object(n.useContext)(N),t=e.modalMessage,a=e.setModalMessage;return r.a.createElement("div",{style:{zIndex:11},className:"shadow shadow-modal ".concat(t.opened?"opened":"")},r.a.createElement("div",{className:"modal modal-message box-shadow ".concat(t.class)},r.a.createElement("div",{className:"header"},r.a.createElement(Ee.b,null),r.a.createElement(O.b,null),r.a.createElement(Ee.a,null)),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"title"},t.title),r.a.createElement("div",{className:"message",dangerouslySetInnerHTML:{__html:t.message}})),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{onClick:function(e){a({class:"",title:"",message:"",opened:!1,afterClose:t.afterClose||null})}},"Fechar"))))}),fe=(a(611),function(){var e=Object(n.useContext)(N),t=e.modalOpening,a=e.setModalOpening,o=Object(n.useState)(0),l=Object(c.a)(o,2),s=l[0],d=l[1];Object(n.useEffect)(function(){t.opened&&(d(0),setTimeout(function(){document.getElementById("opening-value").select()},300))},[t]);return r.a.createElement("div",{className:"shadow shadow-modal ".concat(t.opened?"opened":"")},r.a.createElement("div",{className:"modal modal-opening box-shadow"},r.a.createElement("div",{className:"header"},r.a.createElement(me.b,null)),r.a.createElement("div",{className:"body"},r.a.createElement(ue.a,null,r.a.createElement(ue.a.Group,{controlId:"opening-value"},r.a.createElement(ue.a.ControlLabel,null,"Abertura de Caixa"),r.a.createElement(ie.a,{onKeyUp:function(e){return function(e){13===e.keyCode&&s>0&&a({opened:!0,submit:!0,terminal_operation_type:"A",terminal_operation_value:s})}(e)},value:s,onChange:function(e){return function(e){d(e)}(e)},step:.01}))))))}),ve=(a(613),function(){var e=Object(n.useContext)(N),t=e.budget,a=e.modalPayment,o=e.setModalConfirm,l=e.setModalPayment;return r.a.createElement("div",{className:"shadow shadow-modal ".concat(a.opened?"opened":"")},r.a.createElement("div",{className:"modal modal-payment box-shadow"},r.a.createElement("div",{className:"header"},r.a.createElement(L.a,null)),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"left"},r.a.createElement("div",{className:"term"},t.term?"".concat(t.term.CdChamada," - ").concat(t.term.DsPrazo):"Nenhum prazo informado"),r.a.createElement("div",{className:"payments"},t.payments.map(function(e,t){return r.a.createElement("div",{key:t,className:"payment"},r.a.createElement("div",{className:"icon",style:{backgroundImage:"url(".concat(e.image,")")}}),r.a.createElement("div",{className:"description"},e.external.DsFormaPagamento),r.a.createElement("div",{className:"deadline"},d()(e.budget_payment_deadline).format("DD/MM/YYYY")),r.a.createElement("div",{className:"value"},h({value:e.budget_payment_value})),r.a.createElement("button",null,r.a.createElement(x.b,null)))})),r.a.createElement("div",{className:"notes"},r.a.createElement("div",{className:"note"},r.a.createElement("div",{className:"title"},"Dados da Entrega"),r.a.createElement("div",{className:"text"},"S"===t.external.StAgendaEntrega?t.external.DsObservacaoDocumento:"SEM ENTREGA")),r.a.createElement("div",{className:"note"},r.a.createElement("div",{className:"title"},"Observa\xe7\xf5es"),r.a.createElement("div",{className:"text"},t.external.DsObservacaoPedido)))),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"seller"},r.a.createElement("div",{className:"image box-shadow",style:{backgroundImage:"url(".concat(t.seller.image,")")}}),r.a.createElement("div",{className:"code"},t.seller.CdChamada),r.a.createElement("div",{className:"name"},t.seller.NmPessoa)),r.a.createElement("div",{className:"title"},"Dados do Documento"),r.a.createElement("div",{className:"data"},r.a.createElement("div",{className:"label"},"Total de Itens"),r.a.createElement("div",{className:"value"},t.items.length," Item(ns)"),r.a.createElement("div",{className:"label"},"Valor Total"),r.a.createElement("div",{className:"value"},"R$ ",h({value:t.budget_value})),r.a.createElement("div",{className:"label"},"Al. Desconto"),r.a.createElement("div",{className:"value"},h({value:t.budget_aliquot_discount}),"%"),r.a.createElement("div",{className:"label"},"Vl. Desconto"),r.a.createElement("div",{className:"value"},"R$ ",h({value:t.budget_value_discount})),r.a.createElement("div",{className:"label"},"Vl Total Liquido"),r.a.createElement("div",{className:"value"},"R$ ",h({value:t.budget_value_total}))))),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{onClick:function(e){l({opened:!1})}},"Cancelar"),r.a.createElement("button",{onClick:function(e){o({id:"budgetSubmit",message:"Deseja realmente faturar o documento?",opened:!0,confirmed:!1,buttonDenyText:"N\xe3o",buttonConfirmText:"Sim"})}},"Faturar"))))}),he=(a(615),function(){var e=Object(n.useRef)(null),t=Object(n.useContext)(N),a=t.printOE,o=t.setPrintOE,l=t.printNFCe,c=t.setPrintNFCe,s=t.modalSuccess,d=t.setModalSuccess,u=function(){d({opened:!1,data:s.data})};return Object(n.useEffect)(function(){s.opened&&setTimeout(function(){e.current.focus()},300)},[s]),r.a.createElement("div",{className:"shadow shadow-modal ".concat(s.opened?"opened":"")},r.a.createElement("div",{className:"modal modal-success box-shadow"},r.a.createElement("div",{className:"header"},r.a.createElement(O.b,null)),r.a.createElement("div",{className:"body"},r.a.createElement("p",null,"Documento Faturado com sucesso!",r.a.createElement("br",null),r.a.createElement("b",null,s.data.NrDocumento))),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{onClick:function(e){u()}},"Fechar"),r.a.createElement("button",{ref:e,onClick:function(e){return"65"===s.data.DsModelo?c({opened:!0,reprint:!1,budget:l.budget,budget_id:s.data.budget_id}):o({opened:!0,reprint:!1,budget:a.budget,budget_id:s.data.budget_id}),void u()}},"Visualizar Impress\xe3o"))))}),ye=a(329),_e=(a(617),function(){var e=Object(n.useContext)(N),t=e.user,a=e.setLoading,o=e.modalAuthorization,l=e.setModalMessage,c=e.setModalAuthorization;Object(n.useEffect)(function(){o.opened&&setTimeout(function(){document.getElementById("user-name").select()},300)},[o]);var s=function(e,t){c({action:o.action,message:o.message,opened:!1,canceled:e,authorized:t,buttonDenyText:o.buttonDenyText,buttonConfirmText:o.buttonConfirmText,data:o.data||null})},d=function(e,n){a(function(e){return e+1}),_.post({script:"authorization",action:o.action,data:{user_name:e,user_pass:n,token:t.terminal.token,hostIP:t.terminal.hostIP,osType:t.terminal.osType,hostName:t.terminal.hostName,platform:t.terminal.platform,userName:t.terminal.userName,appVersion:t.terminal.appVersion,data:o.data}}).then(function(e){200===e.status?(s(!1,!0),document.getElementById("user-name").value="",document.getElementById("user-pass").value=""):l({class:"warning",title:e.response.data.title||"Aten\xe7\xe3o",message:e.response.data.message,opened:!0}),a(function(e){return e-1})})};return r.a.createElement("div",{className:"shadow shadow-modal ".concat(o.opened?"opened":"")},r.a.createElement("div",{className:"modal modal-authorization box-shadow"},r.a.createElement("div",{className:"header"},r.a.createElement(w.e,null)),r.a.createElement("div",{className:"body"},r.a.createElement("p",null,o.message),r.a.createElement(ue.a,null,r.a.createElement(ue.a.Group,{controlId:"user-name"},r.a.createElement(ue.a.ControlLabel,null,"Usu\xe1rio"),r.a.createElement(ue.a.Control,{name:"user-name"})),r.a.createElement(ue.a.Group,{controlId:"user-pass"},r.a.createElement(ue.a.ControlLabel,null,"Senha"),r.a.createElement(ue.a.Control,{name:"user-pass",type:"password",autoComplete:"off"})))),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{onClick:function(){return s(!0,!1)}},r.a.createElement(ye.a,null)," ",o.buttonDenyText),r.a.createElement("button",{onClick:function(){return function(){var e=document.getElementById("user-name").value,t=document.getElementById("user-pass").value;e&&t?d(e,t):l({class:"warning",title:"Ops!",message:"Informe o login e senha",zIndex:11,opened:!0})}()}},r.a.createElement(O.a,null)," ",o.buttonConfirmText))))}),Ne=(a(619),a(622),a(624),a(627),function(){Object(n.useEffect)(function(){Ze(),lt(),setInterval(function(){return w(d()().format("HH:mm"))},1e3)},[]);var e=function(){return{term_id:"",budget_id:"",client_id:"",seller_id:"",company_id:"",budget_value:0,document_code:"",external_type:"",budget_value_total:0,budget_value_discount:0,term:{IdPrazo:"",CdChamada:"",DsPrazo:""},items:[],payments:[],person:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},seller:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},external:{StAgendaEntrega:"",DsObservacaoPedido:"",DsObservacaoDocumento:""},document:{vFedTrib:0,vEstTrib:0,vMunTrib:0,vlPago:0,vlTroco:0,vlCobrado:0,chNFe:"",nProt:"",dhRecbto:""}}},t=Object(n.useState)(0),a=Object(c.a)(t,2),o=a[0],l=a[1],s=Object(n.useState)(0),u=Object(c.a)(s,2),i=u[0],m=u[1],p=Object(n.useState)([]),b=Object(c.a)(p,2),E=b[0],g=b[1],f=Object(n.useState)({}),v=Object(c.a)(f,2),h=v[0],y=v[1],D=Object(n.useState)(d()().format("HH:mm")),O=Object(c.a)(D,2),x=O[0],w=O[1],T=Object(n.useState)({image:"",user_id:"",person_id:"",user_active:"",user_name:"",access:{},terminal:{},companies:[]}),P=Object(c.a)(T,2),S=P[0],j=P[1],A=Object(n.useState)({term_id:"",budget_id:"",client_id:"",seller_id:"",company_id:"",budget_value:0,document_code:"",external_type:"",budget_value_total:0,budget_value_discount:0,term:{IdPrazo:"",CdChamada:"",DsPrazo:""},items:[],payments:[],person:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},seller:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},external:{StAgendaEntrega:"",DsObservacaoPedido:"",DsObservacaoDocumento:""},document:{vFedTrib:0,vEstTrib:0,vMunTrib:0,vlPago:0,vlTroco:0,vlCobrado:0,chNFe:"",nProt:"",dhRecbto:""}}),L=Object(c.a)(A,2),R=L[0],F=L[1],M=Object(n.useState)({image:"null",company_id:"null",company_code:"null",company_name:"null",company_color:"null",company_short_name:"",user_company_main:"null",company_sector_id:"null",external:{NrCGC:"null",NmEmpresa:"null",CdUF:"null",CdIBGE:"null",TpLogradouro:"",DsEndereco:"null",NrLogradouro:"null",NmBairro:"null",NmCidade:"null",NrCEP:"null",NrTelefone:"null",NrInscrEstadual:"null",TpRegimeEspecialTributacao:"null",AlCreditoICMSSN:"null",CSOSNEmpresa:"null",CSOSNEmpresaPDV:"null",AlFCP:"null",IdContaBancariaCaixa:"null"}}),k=Object(c.a)(M,2),B=k[0],H=k[1],G=Object(n.useState)({terminal_id:null,user_id:null,terminal_active:null,terminal_nfe:null,terminal_nfce:null,terminal_oe:null,terminal_name:null,terminal_token:null,terminal_nickname:null,terminal_date:null,operation:null}),U=Object(c.a)(G,2),K=U[0],q=U[1],Q=Object(n.useState)({company_id:null,show_opened:"Y",show_billed:"N",show_others:"N",reference:d()().format("YYYY-MM-DD")}),J=Object(c.a)(Q,2),$=J[0],W=J[1],ee=Object(n.useState)({budget:{term_id:"",budget_id:"",client_id:"",seller_id:"",company_id:"",budget_value:0,document_code:"",external_type:"",budget_value_total:0,budget_value_discount:0,term:{IdPrazo:"",CdChamada:"",DsPrazo:""},items:[],payments:[],person:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},seller:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},external:{StAgendaEntrega:"",DsObservacaoPedido:"",DsObservacaoDocumento:""},document:{vFedTrib:0,vEstTrib:0,vMunTrib:0,vlPago:0,vlTroco:0,vlCobrado:0,chNFe:"",nProt:"",dhRecbto:""}},opened:!1,reprint:!1,budget_id:null}),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)({budget:{term_id:"",budget_id:"",client_id:"",seller_id:"",company_id:"",budget_value:0,document_code:"",external_type:"",budget_value_total:0,budget_value_discount:0,term:{IdPrazo:"",CdChamada:"",DsPrazo:""},items:[],payments:[],person:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},seller:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},external:{StAgendaEntrega:"",DsObservacaoPedido:"",DsObservacaoDocumento:""},document:{vFedTrib:0,vEstTrib:0,vMunTrib:0,vlPago:0,vlTroco:0,vlCobrado:0,chNFe:"",nProt:"",dhRecbto:""}},opened:!1,reprint:!1,budget_id:null}),oe=Object(c.a)(re,2),le=oe[0],ce=oe[1],se=Object(n.useState)({title:"",action:"",message:"",opened:!1,canceled:!1,authorized:!1,buttonDenyText:"",buttonConfirmText:"",data:null}),ue=Object(c.a)(se,2),ie=ue[0],me=ue[1],Ee=Object(n.useState)({opened:!1}),ye=Object(c.a)(Ee,2),Ne=ye[0],Ce=ye[1],De=Object(n.useState)({opened:!1,paidValue:0,changeValue:0,chargedValue:0}),Oe=Object(c.a)(De,2),xe=Oe[0],we=Oe[1],Te=Object(n.useState)({title:"",message:"",opened:!1,canceled:!1,confirmed:!1,buttonDenyText:"",buttonConfirmText:"",data:null}),Pe=Object(c.a)(Te,2),Se=Pe[0],je=Pe[1],Ie=Object(n.useState)({title:"",message:"",opened:!1}),Ve=Object(c.a)(Ie,2),Ae=Ve[0],Le=Ve[1],Re=Object(n.useState)({opened:!1,submit:!1,terminal_operation_type:null,terminal_operation_value:0}),Fe=Object(c.a)(Re,2),Me=Fe[0],ke=Fe[1],ze=Object(n.useState)({opened:!1,data:{DsModelo:"",IdDocumento:"",IdLoteEstoque:"",NrDocumento:"",budget_id:""}}),Ye=Object(c.a)(ze,2),Be=Ye[0],He=Ye[1],Ge=Object(n.useState)({opened:!1}),Ue=Object(c.a)(Ge,2),Ke=Ue[0],qe=Ue[1],Qe=function(){K.operation&&"E"!==K.operation.terminal_operation_type?"A"===K.operation.terminal_operation_type&&(K.operation.user_id!==S.user_id?je({id:"closeTerminalAuthorization",message:"\n                        Ops!<br/>    \n                        O caixa encontra-se aberto com o usu\xe1rio ".concat(K.operation.user_name,".<br/>\n                        Ser\xe1 necess\xe1rio encerrar o caixa. O que deja fazer?\n                    "),opened:!0,confirmed:!1,buttonDenyText:"Deslogar do Sistema",buttonConfirmText:"Encerrar o Caixa"}):d()(K.operation.terminal_operation_date).format("YYYY-MM-DD")!==d()().format("YYYY-MM-DD")&&je({id:"closeTerminal",message:"\n                        Ops!<br/>    \n                        O caixa n\xe3o foi encerrado anteriormente.<br/>\n                        Ser\xe1 necess\xe1rio encerrar o caixa. O que deja fazer?\n                    ",opened:!0,confirmed:!1,buttonDenyText:"Deslogar do Sistema",buttonConfirmText:"Encerrar o Caixa"})):rt()},Je=function(e){Le({class:"danger",title:e&&e.title?e.title:"Aten\xe7\xe3o!",message:e&&e.message?e.message:"Resposta inesperada do servidor.",opened:!0})},$e=function(e){at(),m(function(e){return e+1}),_.post({script:"document",action:"cancel",data:e}).then(function(e){200===e.status?(et(),Le({class:"success",title:e.data.NrDocumento,message:"Documento cancelado com sucesso!",opened:!0})):Le({class:"warning",title:e.response&&e.response.data&&e.response.data.title?e.response.data.title:"Aten\xe7\xe3o!",message:e.response&&e.response.data&&e.response.data.message?e.response.data.message:"Resposta inesperada do servidor.",opened:!0}),m(function(e){return e-1})})},We=function(e){ot({terminal_id:K.terminal_id,terminal_operation_type:"E",terminal_operation_value:0,openAfter:e.openAfter||!1,logoutAfter:e.logoutAfter||!1})},Ze=function(){m(function(e){return e+1}),_.post({script:"data",action:"get"}).then(function(e){200===e.status?(j(e.data.login),l(e.data.config),q(e.data.terminal),H(e.data.login.companies.filter(function(e){return"Y"===e.user_company_main})[0])):Je(),m(function(e){return e-1})})},Xe=function(e){m(function(e){return e+1}),_.post({script:"budget",action:"get",data:{budget_id:e}}).then(function(e){200===e.status?ae.opened?ne({budget:e.data,opened:!0,reprint:ae.reprint}):le.opened?ce({budget:e.data,opened:!0,reprint:le.reprint}):F(e.data):Je(),m(function(e){return e-1})})},et=function(){at(),m(function(e){return e+1}),_.post({script:"budget",action:"getList",data:$}).then(function(e){200===e.status?g(e.data):Le({class:"warning",title:"Aten\xe7\xe3o!",message:"Resposta inesperada do servidor.",opened:!0}),m(function(e){return e-1})})},tt=function(){var e=R.payments.filter(function(e){return"00A0000001"===e.modality_id});return e.length>0?e[0].budget_payment_value:0},at=function(){F({term_id:"",budget_id:"",client_id:"",seller_id:"",company_id:"",budget_value:0,document_code:"",external_type:"",budget_value_total:0,budget_value_discount:0,term:{IdPrazo:"",CdChamada:"",DsPrazo:""},items:[],payments:[],person:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},seller:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},external:{StAgendaEntrega:"",DsObservacaoPedido:"",DsObservacaoDocumento:""},document:{vFedTrib:0,vEstTrib:0,vMunTrib:0,vlPago:0,vlTroco:0,vlCobrado:0,chNFe:"",nProt:"",dhRecbto:""}}),ce({opened:!1,budget:{term_id:"",budget_id:"",client_id:"",seller_id:"",company_id:"",budget_value:0,document_code:"",external_type:"",budget_value_total:0,budget_value_discount:0,term:{IdPrazo:"",CdChamada:"",DsPrazo:""},items:[],payments:[],person:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},seller:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},external:{StAgendaEntrega:"",DsObservacaoPedido:"",DsObservacaoDocumento:""},document:{vFedTrib:0,vEstTrib:0,vMunTrib:0,vlPago:0,vlTroco:0,vlCobrado:0,chNFe:"",nProt:"",dhRecbto:""}}})},nt=function(){window.electronMessage("afterLogout")},rt=function(){ke({opened:!0,submit:!1,terminal_operation_type:null,terminal_operation_value:0})},ot=function(e){m(function(e){return e+1}),_.post({script:"terminal",action:"operation",data:e}).then(function(t){200===t.status?(ke({opened:!1,submit:!1,terminal_operation_type:null,terminal_operation_value:0}),e.openAfter&&rt(),e.logoutAfter&&nt()):Le({class:"warning",title:"Aten\xe7\xe3o!",message:"Resposta inesperada do servidor.",opened:!0,afterClose:"terminalOperation"}),m(function(e){return e-1})})},lt=function(){try{window.require("electron").ipcRenderer.on("printing",function(e,t){ce({opened:!1,getBudgets:!0,budget:{term_id:"",budget_id:"",client_id:"",seller_id:"",company_id:"",budget_value:0,document_code:"",external_type:"",budget_value_total:0,budget_value_discount:0,term:{IdPrazo:"",CdChamada:"",DsPrazo:""},items:[],payments:[],person:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},seller:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},external:{StAgendaEntrega:"",DsObservacaoPedido:"",DsObservacaoDocumento:""},document:{vFedTrib:0,vEstTrib:0,vMunTrib:0,vlPago:0,vlTroco:0,vlCobrado:0,chNFe:"",nProt:"",dhRecbto:""}}})})}catch(e){}window.onafterprint=function(e){ne({opened:!1,getBudgets:!0,budget:{term_id:"",budget_id:"",client_id:"",seller_id:"",company_id:"",budget_value:0,document_code:"",external_type:"",budget_value_total:0,budget_value_discount:0,term:{IdPrazo:"",CdChamada:"",DsPrazo:""},items:[],payments:[],person:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},seller:{image:"",IdPessoa:"",CdChamada:"",NmPessoa:""},external:{StAgendaEntrega:"",DsObservacaoPedido:"",DsObservacaoDocumento:""},document:{vFedTrib:0,vEstTrib:0,vMunTrib:0,vlPago:0,vlTroco:0,vlCobrado:0,chNFe:"",nProt:"",dhRecbto:""}}})}},ct=function(e){m(function(e){return e+1}),qe({opened:!1}),_.post({script:"budget",action:"recover",data:e}).then(function(e){200===e.status?(et(),Le({class:"success",message:"Documento recuperado com sucesso!",opened:!0})):Le({class:"danger",title:e.response.data.title||"Aten\xe7\xe3o",message:e.response.data.message,opened:!0}),m(function(e){return e-1})})},st=function(){var e=R;e.company=B,e.change={paidValue:xe.paidValue,changeValue:xe.changeValue,chargedValue:xe.chargedValue},m(function(e){return e+1}),qe({opened:!1}),_.post({script:"document",action:"submit"+("D"===R.external_type?"NFCe":"OE"),data:e}).then(function(e){200===e.status?("D"===R.external_type?ce({opened:!0,reprint:!1,budget:le.budget,budget_id:R.budget_id}):ne({opened:!0,reprint:!1,budget:ae.budget,budget_id:R.budget_id}),je({id:"budgetCancel",confirmed:!0})):Le({class:"danger",title:e.response.data.title||"Aten\xe7\xe3o",message:e.response.data.message,opened:!0}),m(function(e){return e-1})})};return Object(n.useEffect)(function(){R.budget_id&&Ce({opened:!0})},[R]),Object(n.useEffect)(function(){y({display:i>0?"block":"none"})},[i]),Object(n.useEffect)(function(){B.company_id&&W({reference:$.reference,company_id:B.company_id,show_opened:$.show_opened,show_billed:$.show_billed,show_others:$.show_others})},[B]),Object(n.useEffect)(function(){K.terminal_id&&Qe()},[K]),Object(n.useEffect)(function(){$.company_id&&(at(),et())},[$]),Object(n.useEffect)(function(){ae.opened&&ae.budget_id&&Xe(ae.budget_id),ae.getBudgets&&et()},[ae]),Object(n.useEffect)(function(){le.opened&&le.budget_id&&Xe(le.budget_id),le.getBudgets&&et()},[le]),Object(n.useEffect)(function(){!xe.opened&&xe.paidValue>0&&st()},[xe]),Object(n.useEffect)(function(){(Se.confirmed||Se.canceled)&&function(){switch(Se.id){case"budgetSubmit":if(Se.confirmed){var e=tt();e>0?we({opened:!0,paidValue:0,changeValue:0,chargedValue:e}):st()}break;case"budgetCancel":Se.confirmed&&(at(),Ce({opened:!1}));break;case"closeTerminal":Se.confirmed?We({logoutAfter:!0}):nt();break;case"closeTerminalAuthorization":Se.confirmed?me({action:"closeTerminalAuthorization",title:"Autoriza\xe7\xe3o",message:"Para encerrar o caixa aberto por outro usu\xe1rio ser\xe1 necess\xe1rio a autoriza\xe7\xe3o.",opened:!0,authorized:!1,buttonDenyText:"Cancelar",buttonConfirmText:"Autorizar",data:{}}):nt();break;case"close":Se.confirmed&&We({logoutAfter:!0});break;case"documentCancel":Se.confirmed&&me({action:"documentCancel",title:"Autoriza\xe7\xe3o",message:"Para cancelar o documento ser\xe1 necess\xe1rio a autoriza\xe7\xe3o.",opened:!0,authorized:!1,buttonDenyText:"Cancelar",buttonConfirmText:"Autorizar",data:Se.data});break;case"documentPrint":Se.confirmed&&me({action:"documentPrint",title:"Autoriza\xe7\xe3o",message:"Reimpress\xe3o do documento.",opened:!0,authorized:!1,buttonDenyText:"Cancelar",buttonConfirmText:"Autorizar",data:Se.data});break;case"documentRecover":Se.confirmed&&ct(Se.data)}}()},[Se]),Object(n.useEffect)(function(){Ae.afterClose&&function(){switch(Ae.afterClose){case"terminalOperation":Qe()}}()},[Ae]),Object(n.useEffect)(function(){Me.opened&&Me.submit&&Me.terminal_operation_type&&Me.terminal_operation_value>0&&ot({terminal_id:K.terminal_id,terminal_operation_type:Me.terminal_operation_type,terminal_operation_value:Me.terminal_operation_value})},[Me]),Object(n.useEffect)(function(){(ie.authorized||ie.canceled)&&function(){switch(ie.action){case"documentCancel":ie.authorized&&$e(ie.data);break;case"documentPrint":ie.authorized&&("65"===ie.data.modelo?ce({opened:!0,reprint:!0,budget:Ne.opened?R:le.budget,budget_id:ie.data.budget_id||le.budget_id}):ne({opened:!0,reprint:!0,budget:Ne.opened?R:le.budget,budget_id:ie.data.budget_id||le.budget_id}));break;case"openDevTools":ie.authorized&&window.electronMessage("openDevTools","appWindow");break;case"closeTerminalAuthorization":ie.authorized?We({openAfter:!0}):Qe()}}()},[ie]),r.a.createElement(N.Provider,{value:{time:x,user:S,config:o,budget:R,getBudget:Xe,budgets:E,setLoading:m,company:B,setCompany:H,filters:$,setFilters:W,printOE:ae,setPrintOE:ne,printNFCe:le,setPrintNFCe:ce,modalChange:xe,setModalChange:we,modalBudget:Ne,setModalBudget:Ce,modalConfirm:Se,setModalConfirm:je,modalMessage:Ae,setModalMessage:Le,modalOpening:Me,setModalOpening:ke,modalPayment:Ke,setModalPayment:qe,modalSuccess:Be,setModalSuccess:He,modalAuthorization:ie,setModalAuthorization:me}},r.a.createElement(z,null),r.a.createElement("div",{className:"body"},r.a.createElement(I,{initBudget:at})),r.a.createElement(C,null),r.a.createElement(V,null),r.a.createElement(Z,{getEmptyBudget:e}),r.a.createElement(X,{getEmptyBudget:e}),r.a.createElement(de,null),r.a.createElement(pe,null),r.a.createElement(be,null),r.a.createElement(ge,null),r.a.createElement(fe,null),r.a.createElement(ve,null),r.a.createElement(he,null),r.a.createElement(_e,null),r.a.createElement(Y,{loadingStyle:h}))}),Ce=a(95),De=a(330);l.a.createRoot(document.getElementById("root")).render(r.a.createElement(Ce.a,{locale:De.a},r.a.createElement(Ne,null)))}},[[346,2,1]]]);
//# sourceMappingURL=main.6e028f55.chunk.js.map